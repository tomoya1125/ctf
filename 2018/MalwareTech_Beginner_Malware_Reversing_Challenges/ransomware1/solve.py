#!/bin/python3

plain_fig = "Penguins.jpg"
enc_fig = "Penguins.jpg_encrypted"
key = []
key_size = 32

pf = open(plain_fig, "rb")
p = pf.read()
pf.close()

ef = open(enc_fig, "rb")
e = ef.read()
ef.close()

#Extract enc key from enc_fig
for i in range(0, key_size):
  key.append(ord(p[i])^ord(e[i]))

# Decrypt flag
enc_flag = "flag.txt_encrypted"
r = ""

fp = open(enc_flag,"rb")
f = fp.read()
fp.close()

for i in range(0, len(f)):
  r += chr(ord(f[i])^key[i%32])

print(r)
